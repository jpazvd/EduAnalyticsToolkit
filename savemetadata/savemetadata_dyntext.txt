<<dd_version: 1>>
Documentation of YOUR TITLE HERE dataset
=====================================================================

<<dd_do:quietly>>

*! version 1.0 18 SEP 2019

* This is the documentation generator companion from savemetadata.
* This file presents the example used in GLAD, so you have a starting point
* to customize it according to your needs.

* Note that this is an Ancillary file in the package, so to download it type
* net get edukit, from("https://raw.githubusercontent.com/worldbank/eduanalyticstoolkit/dyndoc4save/src") replace
* This file will NOT be automatically downloaded when you 'net install' the package
* like the other ado and help files.

* Author: Diana Goldemberg

* This section create locals to later display them dynamically

* Dataset observations and variables
describe
local nobs  = r(N)
local nvars = r(k)

/*  Metadata automatically generated by savemetadata is stored in metadata_chars
    the idea is to read through them all and index them, so they are all displayed
    with their correct names and values. */

    local i = 1
    local metadata_chars:   char _dta[metadata_chars]
    while "`metadata_chars'" != "" {
      gettoken thischar metadata_chars : metadata_chars, parse(" ")
      local char_i`i' = 	    "`thischar'"
      local char_value_i`i':  char _dta[`thischar']
      local ++i
    }

/*  The loop above was generic, so it could be reused in other dyndocs,
    but for all GLAD files, we know the exact order or metadata.
    As in any file saved by savemetadata, metadata_chars starts with:
      i1.  lastsave
      i2.  varclasses_used
    Moreover, in GLAD do files, the header is concatenated into:
      i3.  region
      i4.  year
      i5.  assessment
      i6.  master
      i7.  adaptation
      i8.  module
      i9.  ttl_info
      i10. dofile_info
      i11. description
    Some do files (like EGRAs) may have more metadata */

/*  We also want to read varclasses_used to read each of the chars it defines.
    By reading each of those chars, we find which variables are in those classes. */

    local j = 1
    local varclasses_used:	char _dta[varclasses_used]
    while "`varclasses_used'" != "" {
      gettoken thischar varclasses_used : varclasses_used, parse(" ")
      local char_j`j' = 	    "`thischar'"
      local char_value_j`j':  char _dta[`thischar']
      local ++j
    }

/*  As in any file saved by savemetadata, varclasses_used starts with:
      j1.  idvars
    Moreover, in GLAD do files, it's always:
      j2.  valuevars
      j3.  traitvars
      j4.  samplevars
    Some do files (or future edits) may entail having more varclasses_used. */

/*  NOTE: we purposefully use individual spaces instead of tabs in the
    dd_display section below, to get consistency in spacing across platforms.
    Of course, this is only relevant because for GLAD, i3-i12 j2-j4 are known.
*/

<</dd_do>>

[back to CHOOSE SOMETHING, LIKE YOUR README](https://github.com/worldbank/EduAnalyticsToolkit/blob/master/README.md)

<<dd_display:"`char_value_i11'">>

**Metadata** stored in this dataset:

~~~~
<<dd_display:"`char_i3'">>:      <<dd_display:"`char_value_i3'">>
<<dd_display:"`char_i4'">>:        <<dd_display:"`char_value_i4'">>
<<dd_display:"`char_i5'">>:  <<dd_display:"`char_value_i5'">>
<<dd_display:"`char_i6'">>:      <<dd_display:"`char_value_i6'">>
<<dd_display:"`char_i7'">>:  <<dd_display:"`char_value_i7'">>
<<dd_display:"`char_i8'">>:      <<dd_display:"`char_value_i8'">>
<<dd_display:"`char_i9'">>:    <<dd_display:"`char_value_i9'">>
<<dd_display:"`char_i10'">>: <<dd_display:"`char_value_i10'">>
<<dd_display:"`char_i1'">>:    <<dd_display:"`char_value_i1'">>
~~~~


About the **<<dd_display:`nvars'>> variables** in this dataset:

~~~~
The variables belong to the following variable classifications:
<<dd_display:"`char_value_i2'">>

<<dd_display:"`char_j1'">>:    <<dd_display:"`char_value_j1'">>
<<dd_display:"`char_j2'">>:   <<dd_display:"`char_value_j2'">>
<<dd_display:"`char_j3'">>: <<dd_display:"`char_value_j3'">>
<<dd_display:"`char_j4'">>: <<dd_display:"`char_value_j4'">>

<<dd_do>>
codebook, compact
<</dd_do>>
~~~~

About the **<<dd_display: %-7.0fc `nobs'>> observations** in this dataset:

~~~~
<<dd_do>>
tab countrycode idgrade if national_level==1

tab countrycode idgrade if national_level==0
<</dd_do>>
~~~~
